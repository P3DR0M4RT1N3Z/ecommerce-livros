<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Carrinho – Livraria Aurora</title>
  <meta name="description" content="Veja e gerencie os livros do seu carrinho na Livraria Aurora.">
  <link rel="stylesheet" href="css/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lora:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <header class="main-header">
    <div class="container">
      <h1 class="logo">Livraria Aurora</h1>
      <nav>
        <ul>
          <li><a href="index.html">Início</a></li>
          <li><a href="catalogo.html">Catálogo</a></li>
          <li><a href="wishlist.html">Wishlist</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <section class="carrinho-section">
      <div class="container carrinho-flex">
        <section class="carrinho-lista">
          <h2>Meu Carrinho</h2>
          <div class="carrinho-itens">
            <!-- Exemplo de item no carrinho -->
            <div class="carrinho-item">
              <img src="images/livro1.jpg" alt="O Sol é Para Todos">
              <div class="carrinho-info">
                <h3>O Sol é Para Todos</h3>
                <p class="autor">Harper Lee</p>
                <div class="carrinho-qtd">
                  <button class="qtd-btn">-</button>
                  <input type="number" value="1" min="1">
                  <button class="qtd-btn">+</button>
                </div>
              </div>
              <div class="carrinho-preco">
                <span>R$ 39,90</span>
                <button class="btn-remove" title="Remover do carrinho">✕</button>
              </div>
            </div>
            <div class="carrinho-item">
              <img src="images/livro2.jpg" alt="1984">
              <div class="carrinho-info">
                <h3>1984</h3>
                <p class="autor">George Orwell</p>
                <div class="carrinho-qtd">
                  <button class="qtd-btn">-</button>
                  <input type="number" value="2" min="1">
                  <button class="qtd-btn">+</button>
                </div>
              </div>
              <div class="carrinho-preco">
                <span>R$ 59,80</span>
                <button class="btn-remove" title="Remover do carrinho">✕</button>
              </div>
            </div>
            <!-- Caso o carrinho esteja vazio -->
            <!-- <div class="carrinho-vazio">
              Seu carrinho está vazio. <a href="catalogo.html">Explore o catálogo</a>!
            </div> -->
          </div>
        </section>
        <aside class="carrinho-resumo">
          <h2>Resumo</h2>
          <div class="resumo-linhas">
            <div class="resumo-linha">
              <span>Subtotal</span>
              <span>R$ 99,70</span>
            </div>
            <div class="resumo-linha">
              <span>Frete</span>
              <span>R$ 10,00</span>
            </div>
            <div class="resumo-total">
              <span>Total</span>
              <span class="preco-total">R$ 109,70</span>
            </div>
          </div>
          <a href="checkout.html" class="btn-primary btn-finalizar">Finalizar Compra</a>
        </aside>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <p>&copy; 2025 Livraria Aurora. Todos os direitos reservados.</p>
    </div>
  </footer>

  <script>
  // filepath: js/carrinho.js

  // Dados mockados do carrinho (preço fixo, quantidade variável)
  let carrinho = [
    {
      id: 1,
      titulo: "O Sol é Para Todos",
      autor: "Harper Lee",
      preco: 39.90,
      qtd: 1,
      imagem: "images/livro1.jpg"
    },
    {
      id: 2,
      titulo: "1984",
      autor: "George Orwell",
      preco: 59.80, // Preço unitário fixo (exemplo: 59.80/6 = 9.97)
      qtd: 1,
      imagem: "images/livro2.jpg"
    }
  ];

  // Renderiza os itens do carrinho
  function renderCarrinho() {
    const itensDiv = document.querySelector('.carrinho-itens');
    itensDiv.innerHTML = '';
    if (carrinho.length === 0) {
      itensDiv.innerHTML = `<div class="carrinho-vazio">
        Seu carrinho está vazio. <a href="catalogo.html">Explore o catálogo</a>!
      </div>`;
      atualizarResumo();
      return;
    }
    carrinho.forEach((item, idx) => {
      const div = document.createElement('div');
      div.className = 'carrinho-item';
      div.innerHTML = `
        <img src="${item.imagem}" alt="${item.titulo}">
        <div class="carrinho-info">
          <h3>${item.titulo}</h3>
          <p class="autor">${item.autor}</p>
          <div class="carrinho-qtd">
            <button class="qtd-btn" data-idx="${idx}" data-action="menos">-</button>
            <input type="number" value="${item.qtd}" min="1" data-idx="${idx}" readonly>
            <button class="qtd-btn" data-idx="${idx}" data-action="mais">+</button>
          </div>
        </div>
        <div class="carrinho-preco">
          <span>R$ ${(item.preco * item.qtd).toFixed(2).replace('.', ',')}</span>
          <button class="btn-remove" data-idx="${idx}" title="Remover do carrinho">✕</button>
        </div>
      `;
      itensDiv.appendChild(div);
    });
    atualizarResumo();
  }

  // Atualiza o resumo do pedido
  function atualizarResumo() {
    let subtotal = carrinho.reduce((s, item) => s + item.preco * item.qtd, 0);
    let frete = carrinho.length > 0 ? 10 : 0;
    document.querySelectorAll('.resumo-linha span:last-child')[0].textContent = `R$ ${subtotal.toFixed(2).replace('.', ',')}`;
    document.querySelectorAll('.resumo-linha span:last-child')[1].textContent = `R$ ${frete.toFixed(2).replace('.', ',')}`;
    document.querySelector('.preco-total').textContent = `R$ ${(subtotal + frete).toFixed(2).replace('.', ',')}`;
  }

  // Eventos dos botões
  document.addEventListener('click', function(e) {
    // Aumentar/diminuir quantidade
    if (e.target.classList.contains('qtd-btn')) {
      const idx = parseInt(e.target.dataset.idx);
      if (e.target.dataset.action === 'mais') {
        carrinho[idx].qtd++;
      } else if (e.target.dataset.action === 'menos' && carrinho[idx].qtd > 1) {
        carrinho[idx].qtd--;
      }
      renderCarrinho();
    }
    // Remover item
    if (e.target.classList.contains('btn-remove')) {
      const idx = parseInt(e.target.dataset.idx);
      carrinho.splice(idx, 1);
      renderCarrinho();
    }
  });

  // Inicialização
  renderCarrinho();
  </script>
</body>
</html>